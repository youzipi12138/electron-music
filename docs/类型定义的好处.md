# TypeScript 定义返回值类型的好处

## 1. 智能提示与自动补全

定义后编辑器能自动补全和提示属性，减少拼写错误，提高效率。

示例（基于项目 `SearchApi.search` 和 `Song`/`SearchResponse` 类型）：

```ts
SearchApi.search('棉花糖', SearchType.SONG).then((res) => {
  // res: SearchResponse
  console.log(res.result.songs); // 有提示
  console.log(res.result.songCount); // 有提示
  console.log(res.code); // 有提示
});
```

## 2. 编译时错误检查

错误在编译期暴露，而非运行时：

```ts
res.result.songs.forEach((song) => {
  console.log(song.name); // ✅
  console.log(song.nam); // ❌ Property 'nam' does not exist
});
```

## 3. 代码即文档

类型描述清晰的数据结构，不看接口文档也能理解：

```ts
export interface SearchResponse {
  result: {
    songs: Song[];
    songCount: number;
  };
  code: number;
}
```

## 4. 重构更安全

当后端返回结构变更（如 `result` 改为 `data`），相关使用点会全部报错提示，避免遗漏。

## 5. 团队协作更顺畅

类型即契约，统一数据结构认知，降低沟通成本。

## 6. 在本项目中的落地

- 在 `src/ui/api/Search.ts` 中定义了：
  - `Song`：描述歌曲结构
  - `SearchResponse`：描述搜索接口返回
  - `search` 使用泛型：`get<SearchResponse>(...)`
- 在 `src/ui/components/SingleMusic.tsx` 中：
  - `useState<Song[]>([])` 保证状态类型明确
  - `res` 自动推断为 `SearchResponse`，访问安全且有提示

简例：

```ts
const [singleMusic, setSingleMusic] = useState<Song[]>([]);

useEffect(() => {
  SearchApi.search('棉花糖', SearchType.SONG).then((res) => {
    setSingleMusic(res.result.songs); // 类型匹配
  });
}, []);
```

—— 定义返回值类型是 TS 最佳实践，投入小、收益大。
